---
title:SQS
author: cotes   
categories: [AWS SSA 03,디커플링 애플리케이션 SQS SNS Kinesis ActiveMQ]
tags: [AWS]
---

## SQS 정의

**분산된 시스템이나 마이크로서비스 간에 메시지를 주고받을 때**, AWS에서 제공하는 **완전 관리형 메시지 큐 서비스**입니다. 

SQS는 분산된 시스템이나 마이크로서비스 간에 메시지를 주고받을 때, **메시지 대기열을 효율적으로 관리하고 메시지를 안전하게 전송**

------

#### **SQS 개요**

- **목적**: 분산 시스템의 컴포넌트를 **분리(Decoupling)**하여 확장성과 안정성 향상.
- **기능**: 메시지 큐를 통해 **비동기 통신** 지원. 생산자(Producer)와 소비자(Consumer) 간의 버퍼 역할.
- **특징**:
  - **완전 관리형**: 인프라 관리 불필요.
  - **무제한 처리량**: 초당 수백만 메시지 처리 가능.
  - **짧은 지연 시간**: 메시지 전송/수신 시 밀리초 단위 응답.

------

#### **표준 큐 vs FIFO 큐**

| **구분**      | **표준 큐**               | **FIFO 큐**                               |
| :------------ | :------------------------ | :---------------------------------------- |
| **전송 순서** | Best-Effort (순서 불보장) | 정확한 순서 보장                          |
| **중복 처리** | At-Least-Once (중복 가능) | Exactly-Once (중복 없음)                  |
| **처리량**    | 무제한                    | 초당 최대 3,000 메시지 (버퍼링 시 10,000) |
| **사용 사례** | 로그 처리, 이벤트 알림    | 주문 처리, 금융 거래                      |

------

#### **확장성 & 통합**

- **Auto Scaling Groups (ASG) 연동**:
  - **CloudWatch 지표** (`ApproximateNumberOfMessages`)로 큐 길이 모니터링.
- **대용량 메시지**:
  - **256KB 초과 시**: 메시지 본문을 S3에 저장 → SQS에는 **S3 객체 참조** 전송.
- **다중 소비자**:
  - 여러 소비자가 동시에 메시지 처리 → **수평 확장**으로 처리량 증가.

------

#### **시험 핵심 포인트**

1. **메시지 중복 처리**:
   - 표준 큐는 중복 가능 → 애플리케이션에서 **Idempotency(멱등성)** 구현 필수.
2. **폴링 방식**:
   - **Short Polling**: 즉시 응답 (빈 큐면 빈 결과 반환).
   - **Long Polling**: 최대 20초 대기 → 메시지 도착 시 즉시 반환.
3. **지연 큐(Delay Queue)**:
   - 메시지 전송 후 특정 시간(초) 동안 소비자에게 노출 지연.

------

### **요약 체크리스트**

1. **SQS** = 비동기 메시징으로 메시지 대기열을 안전하게 처리.
2. **표준 큐** vs **FIFO 큐** → 순서/중복 요구사항에 따라 선택.
3. **ASG 연동** → 큐 길이 모니터링으로 자동 확장.
4. **보안** → HTTPS + KMS + IAM 정책.