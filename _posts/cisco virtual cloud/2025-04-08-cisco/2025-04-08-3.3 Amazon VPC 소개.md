---
title: <h0>Amazon VPC 소개</h0>
author: cotes 
categories: [cisco virtual cloud,2025-04-08-cisco]
tags: [Network,AWS]









---

# Amazon VPC 소개



## **Amazon VPC (Virtual Private Cloud) 상세 설명**

---

### **1. Amazon VPC란?**
Amazon VPC는 AWS 클라우드 내에서 **완전히 격리된 가상 네트워크 환경**을 구축할 수 있는 서비스입니다.  
사용자가 정의한 네트워크 설정에 따라 리소스(EC2, RDS 등)를 배포하고, 보안 및 연결을 제어할 수 있습니다.  

- **핵심 기능**: IP 주소 범위 지정, 서브넷 분할, 라우팅/보안 정책 설정, 외부 네트워크와의 통신 관리.
- 독립적으로 구성된 VPC는 필요에 따라 동일 리전이나 다른 리전에 위치한 VPC들을 서로 연결하여 클라우드 네트워클르 확장할 수 있습니다.

### 핵심

- **AWS에서 VPC(Virtual Private Cloud)는 "클라우드 안에 만드는 나만의(내부망) 가상 네트워크"입니다.**
- **일반적인 네트워크(회사 LAN, VPN)와 비슷하지만, AWS 인프라 위에서 동작한다는 점이 다릅니다.**

------

## **VPC는 왜 필요한가?**

### **(1) 일반 네트워크 vs AWS VPC**

| 일반 네트워크 (예: 회사 LAN)          | AWS VPC                                               |
| :------------------------------------ | :---------------------------------------------------- |
| 물리적 서버, 스위치, 라우터로 구성    | **가상 네트워크** (AWS 인프라 위에 소프트웨어로 생성) |
| 직접 관리해야 함                      | AWS가 관리하지만, **내가 설정을 제어**할 수 있음      |
| 인터넷 연결을 위해 공유기/방화벽 필요 | **인터넷 게이트웨이(IGW), NAT 게이트웨이**로 연결     |

➡ **VPC는 클라우드에서 내 서버(EC2), DB(RDS) 등을 안전하게 묶어주는 가상의 네트워크 방**입니다.

### **(2) VPC가 필요한 이유**

1. **격리된 보안**
   - 내 AWS 리소스(EC2, RDS)가 다른 사람의 리소스와 **섞이지 않도록** 분리합니다.
   - 예: 회사 A와 회사 B가 같은 리전을 써도, 서로의 리소스는 **절대 접근 불가능** (설정 없이는).
2. **네트워크 제어 권한**
   - IP 대역, 서브넷, 라우팅, 보안 규칙을 **마음대로 설정**할 수 있습니다.
   - 예: `10.0.0.0/16`으로 VPC를 만들고, `10.0.1.0/24`는 웹 서버, `10.0.2.0/24`는 DB용으로 분할.
3. **AWS 서비스와의 통합**
   - **PrivateLink**로 S3, DynamoDB 등 AWS 서비스와 **인터넷 없이 직접 연결** 가능.
   - **하이브리드 클라우드** (온프레미스 + AWS) 구축 가능.

------

## **VPC는 어디에 위치하는가?**

### **(1) AWS 인프라 내부에 생성됨**

- VPC는 **리전(Region)** 단위로 생성됩니다.
  - 예: 서울 리전(`ap-northeast-2`)에 `my-vpc`를 만들면, 모든 리소스는 서울 리전의 AWS 데이터센터 안에서 동작합니다.
- **물리적 위치는 AWS가 관리**하지만, **논리적으로는 내가 완전히 제어**합니다.

------

## 나의 궁금증

1. **왜 필요?** → 내 AWS 리소스를 **격리 + 보안 + 제어**하기 위해.
2. **어디에?** → AWS 리전 안에 생성되지만, **내가 설정한 대로만 동작**.
3. **안에 뭐가?** → 서브넷, 라우팅 테이블, 게이트웨이, 보안 그룹.
4. **위에 뭐가?** → EC2, RDS, ELB 등 AWS 서비스가 VPC 안에서 작동.

---

### **Amazon VPC 구성 요소 정리**

---

#### **1. 리전 (Region)**
- **정의**: AWS 인프라가 물리적으로 분산된 지리적 영역 (예: 서울(`ap-northeast-2`), 도쿄(`ap-northeast-1`)).
- **특징**:
  - 각 리전은 **독립된 네트워크**를 가지며, **여러 가용 영역(AZ)**으로 구성됨.
  - 리전 간 데이터 복제 시 **대역폭 비용** 발생.

---

#### **3. 서브넷 (Subnet) & 가용 영역 (AZ)**
| **구분**      | **서브넷**                            | **가용 영역(AZ)**                        |
| ------------- | ------------------------------------- | ---------------------------------------- |
| **정의**      | VPC의 IP 주소 범위를 분할한 작은 단위 | 리전 내 물리적으로 격리된 데이터 센터    |
| **유형**      | 퍼블릭/프라이빗 서브넷                | 예: `ap-northeast-2a`, `ap-northeast-2b` |
| **할당 규칙** | 서브넷은 **하나의 AZ에만** 할당       | 하나의 리전에 **최소 3개의 AZ** 존재     |

- **퍼블릭 서브넷**: 인터넷 게이트웨이로 외부 접근 가능.
- **프라이빗 서브넷**: NAT 게이트웨이를 통해서만 아웃바운드 통신.

---

#### **4. IP CIDR**
- **CIDR (Classless Inter-Domain Routing)**:
  - **표기법**: `[기본 IP]/[서브넷 마스크 비트 수]` (예: `10.0.1.0/24`).
  - **역할**: VPC 및 서브넷의 **IP 주소 범위**를 정의.
  - **제약사항**:
    - VPC CIDR은 `/16` ~ `/28` 범위.
    - 서브넷 CIDR은 VPC CIDR 내에 포함되어야 함.

---

#### **5. 가상 라우터 (Virtual Router) & 라우팅 테이블 (Route Table)**
| **구분**        | **가상 라우터**                          | **라우팅 테이블**                          |
| --------------- | ---------------------------------------- | ------------------------------------------ |
| **정의**        | VPC의 모든 트래픽을 중계하는 논리적 장치 | 트래픽 경로 규칙 집합                      |
| **기본 구성**   | 모든 VPC에 자동 생성                     | 기본 라우팅 테이블 포함 (`로컬 통신` 규칙) |
| **사용자 정의** | 직접 생성 불가                           | 서브넷별 커스텀 라우팅 테이블 적용 가능    |

- **라우팅 규칙 예시**:
  - 인터넷 접근: `0.0.0.0/0` → `igw-123456` (인터넷 게이트웨이).
  - 프라이빗 통신: `10.0.0.0/16` → `local` (VPC 내부).

---

#### **6. 보안 그룹 (Security Group) 과 네트워크 ACL (Network ACL)**
| **구분**      | **보안 그룹**             | **네트워크 ACL**                         |
| ------------- | ------------------------- | ---------------------------------------- |
| **적용 계층** | 인스턴스 수준             | 서브넷 수준                              |
| **상태 추적** | Stateful (응답 자동 허용) | Stateless (모든 트래픽 명시적 규칙 필요) |
| **규칙 평가** | 허용 규칙만 정의          | 허용/거부 규칙 모두 정의 가능            |
| **우선순위**  | 모든 규칙 평가            | 번호 순으로 평가 (낮은 번호 우선)        |

------



------

### 허용 및 거부 정책

**보안 그룹의 정책 테이블은 허용 규칙만 나열하며 허용 규칙에 해당하지 않으면 자동 거부됩니다.**

반면 네트워크 ACL 의 정책 테이블은 허용 규칙과 거부 규칙이 모두 존재하여 규칙을 순차적으로 확인하고 허용과 판단합니다.

네트워크 ACL 에도 모든 규칙이 매칭되지 않으면 거부하는 규칙이 기본적으로 있습니다.

------



- **보안 그룹 예시**:  

  ```plaintext
  인바운드: SSH(22) → MY_IP  
  아웃바운드: ALL 허용  
  ```
- **네트워크 ACL 예시**:  
  ```plaintext
  Rule 100: HTTP(80) Allow  
  Rule 200: SSH(22) Deny  
  ```

---

### **요약: VPC 구성 요소 계층 구조**
```plaintext
1. 리전 (Region)  
   └── 2. VPC (CIDR 블록)  
       ├── 3. 가용 영역 (AZ)  
       │   └── 4. 서브넷 (퍼블릭/프라이빗)  
       ├── 5. 가상 라우터 + 라우팅 테이블  
       ├── 6. 보안 그룹 (인스턴스 방화벽)  
       └── 7. 네트워크 ACL (서브넷 방화벽)  
```

> 💡 **핵심 포인트**:  
> - **리전** → **VPC** → **AZ/서브넷** 순으로 계층화.  
> - **CIDR**은 VPC와 서브넷의 IP 범위를 정의.  
> - **보안 그룹**과 **네트워크 ACL**을 조합해 다중 보안 계층 구성.

------

------

## Amazon VPC와 다른 네트워크 연결

------

### 인터넷 게이트웨이

Amazon VPC는 프라이빗 클라우드 네트워크 환경으로, 외부 인터넷 구간과 연결되지 않은 독립적인 네트워크입니다.

외부 인터넷 구간과 연결이 필요하면 인터넷 게이트웨이라는 네트워킹 자원을 생성한 후 Amazone VPC와 연결하여 외부 인터넷과 통신합니다.

여기에서 인터넷 게이트웨이는 인터넷 구간의 논리적인 연결이자 인터넷으로 나가는 관문이 되는 네트워킹 자원입니다.

퍼블릭 서브넷은 외부 인터넷 통신이 가능한 네트워크입니다. 서브넷의 라우팅 테이블에서 외부 인터넷으로 나가는 타깃 대상을 인터넷 게이트웨이로 지정항 퍼블릭 서브넷 환경을 만듭니다.

| **항목**        | **설명**                                            |
| :-------------- | :-------------------------------------------------- |
| **역할**        | VPC와 인터넷 간 **양방향 통신** 제공                |
| **적용 서브넷** | 퍼블릭 서브넷                                       |
| **주요 기능**   | - 퍼블릭 IP 할당 - 인스턴스의 직접 인터넷 접근 가능 |
| **사용 사례**   | 웹 서버, API 서버 등 외부 노출 필요 인스턴스        |
| **비용**        | 무료                                                |



------

### NAT 게이트웨이

NAT 게이트 웨이는 프라이빗 서브넷에서 외부 인터넷으로 통신하는 관문 역할을 합니다.

NAT는 IP 주소를 변환하는 기능을 제공하며, 프라이빗 Ip 주소를 퍼블릭 IP 주소로 변환하여 외부 인터넷 구간 통신 환경을 만듭니다.



프라이빗 서브넷은 외부 인터넷 구간과 단절된 독립된 네트워크이지만 외부 인터넷 구간과 통신이 필요할 때는 NAT 게이트웨이를 통해 

프라이빗 IP 주소를 퍼블릭 IP 주소로 변환하여 외부 인터넷 구간과 통신할 수 있습니다.

#### **2. NAT 게이트웨이 (Network Address Translation Gateway)**

| **항목**        | **설명**                                                     |
| :-------------- | :----------------------------------------------------------- |
| **역할**        | 프라이빗 서브넷의 **아웃바운드 인터넷 통신** 제공 (단방향)   |
| **적용 서브넷** | 프라이빗 서브넷 (NAT는 퍼블릭 서브넷에 배치)                 |
| **주요 기능**   | - 프라이빗 IP → 퍼블릭 IP 변환 - 보안 강화 (외부에서 내부 접근 불가) |
| **사용 사례**   | 데이터베이스 서버의 패키지 업데이트, 외부 API 호출           |
| **비용**        | 시간당 0.045+처리데이터GB당0.045+처리데이터*GB*당0.045 (리전별 차이) |

------

### VPC 피어링

VPC 피어링은 서로 다른 VPC를 연결하는 기능입니다. 동일 리전 뿐만 아니라 다른 리전에 위치한 VPC와 연결할 수 있고, 다른 계정에 위치한 VPC 까지 연결 가능

VPC 피어링으로 연결할경우 IP CIDR 블록이 중복되면 연결이 불가능한 제약이 있어 VPC 피어링으로 클라우드 네트워크를 확장할 때는 IP 주소 대역을 반드시 점검해야한다.

| **항목**      | **설명**                                                  |
| :------------ | :-------------------------------------------------------- |
| **역할**      | 서로 다른 VPC 간 **비공개 직접 연결**                     |
| **제약 조건** | - CIDR 블록 중복 불가 - 계정/리전/네트워크 계층 제한 없음 |
| **주요 기능** | - 낮은 지연 시간 - 인터넷/VPN 불필요                      |
| **사용 사례** | 개발/운영 환경 분리, 마이크로서비스 아키텍처              |
| **비용**      | 동일 리전: 무료 크로스 리전: GB당 $0.01~0.02              |

------

### Trasit 게이트웨이

| **항목**      | **설명**                                                     |
| :------------ | :----------------------------------------------------------- |
| **역할**      | **중앙 허브**를 통해 VPC/온프레미스/다른 계정 연결 관리      |
| **주요 기능** | - 리전 간 피어링 지원 - 라우팅 테이블로 트래픽 제어          |
| **사용 사례** | 대규모 엔터프라이즈 네트워크, 글로벌 하이브리드 클라우드     |
| **비용**      | 시간당 0.07+처리데이터GB당0.07+처리데이터*GB*당0.02 (리전별 차이) |

------

### 가상 프라이빗 게이트웨이

| **항목**      | **설명**                                           |
| :------------ | :------------------------------------------------- |
| **역할**      | **Site-to-Site VPN** 연결을 위한 AWS 측 게이트웨이 |
| **주요 기능** | - IPSec 터널링 지원 - BGP 라우팅 프로토콜 통합     |
| **사용 사례** | 온프레미스 데이터센터와 VPC 연결                   |
| **비용**      | 시간당 $0.05 (VPN 연결당) + 데이터 전송 비용       |

------

### Amazon VPC 요금

| **서비스**          | **비용 요소**                                       | **예시 비용**                        |
| :------------------ | :-------------------------------------------------- | :----------------------------------- |
| **VPC 자체**        | 무료                                                | -                                    |
| **NAT 게이트웨이**  | 시간당 $0.045 + 데이터 처리 비용                    | 1개월 사용 시 약 $32.4 (시간당 기준) |
| **Transit Gateway** | 시간당 $0.07 + 데이터 처리 비용                     | 1개월 사용 시 약 $50.4 (시간당 기준) |
| **VPN 연결**        | 시간당 0.05+데이터전송GB당0.05+데이터전송*GB*당0.09 | 100GB 전송 시 9+9+5.04 (시간당 기준) |
| **데이터 전송**     | 크로스 리전: GB당 $0.01~0.15                        | 리전 간 1TB 전송 시 $10~150          |

------

