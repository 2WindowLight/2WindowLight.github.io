---
title: <h0>BGP</h0>
author: cotes   
categories: [cisco virtual cloud, 2025-02-17-cisco]
tags: [Network]






---

# BGP



**BGP (Border Gateway Protocol) 개요 및 네트워크 구성 요소 정리**

**🔹 BGP (Border Gateway Protocol)란?**



BGP는 서로 다른 자율 시스템(AS, Autonomous System) 간의 경로 정보를 교환하는 **외부 게이트웨이 프로토콜(EGP, Exterior Gateway Protocol)**이다.

ISP(Internet Service Provider) 또는 대규모 네트워크 간에 사용되며, 경로 벡터 라우팅(Vector Routing) 방식을 사용하여 네트워크 경로를 결정한다.

**BGP는 라우팅의 성능보다는 조직간의 계약된 정책에 따라 최적 경로를 결정한다. (BGP attribute 사용 <- BGP 결정 기준)**

**네트워크 - prefix ex) 1.1.1.1/28 (네트워크 정보 + 서브넷마스크)**

**ospf 할 때 라우팅의 정보 = routing entry = prefix = network 정보**



**✅ BGP의 주요 특징**

| **특징**                 | **설명**                                 |
| ------------------------ | ---------------------------------------- |
| **라우팅 프로토콜 유형** | 경로 벡터 프로토콜 (Path Vector Routing) |
| **사용 범위**            | AS(자율 시스템) 간 라우팅                |
| **경로 결정 요소**       | AS-PATH, NEXT-HOP, LOCAL-PREF, MED 등    |
| **연결 방식**            | TCP 179 포트를 사용                      |
| **BGP 유형**             | iBGP(내부 BGP), eBGP(외부 BGP)           |
| **주요 기능**            | 라우트 필터링, 경로 조작, 최적 경로 선택 |

**🔹 BGP를 사용하는 환경**

​	•	다중 ISP(Internet Service Provider)와 연결된 네트워크

​	•	클라우드 네트워크, 데이터센터 간 연결

​	•	대형 기업 및 기관의 글로벌 네트워크 관리

​	•	인터넷 백본(Backbone) 운영

**🔹 BGP의 기본 동작 과정**

​	1.	**Neighbor 설정** – BGP 피어(Neighbor) 형성 후 TCP(포트 179)로 연결

​	2.	**라우팅 정보 학습** – BGP 피어 간 경로 정보 교환

​	3.	**최적 경로 선택** – BGP 정책 및 AS-Path 등을 기반으로 최적 경로 선정

​	4.	**라우트 배포** – BGP 네트워크에 최적의 경로를 광고(Advertise)

**🔹 Virtual Extension LAN (확장 VLAN)**



VLAN(가상 LAN) 기술을 확장하여 **데이터센터 간 가상 네트워크를 연결하는 기술**

확장된 VLAN을 통해 서로 다른 물리적 위치에 있는 네트워크 장비를 **동일한 네트워크 세그먼트처럼 동작하도록 구성**할 수 있다.

**🔹 주요 네트워크 구성 요소**



**1️⃣ 컴퓨팅 영역 (Computing)**

| **구성 요소**     | **설명**                                |
| ----------------- | --------------------------------------- |
| **CPU**           | 중앙처리장치 (서버의 연산 및 제어 담당) |
| **Memory (RAM)**  | 데이터를 빠르게 저장/처리하는 메모리    |
| **서버 (Server)** | 애플리케이션 및 서비스 실행             |

**2️⃣ 네트워크 인프라 (Networking)**

| **장비**              | **설명**                                          |
| --------------------- | ------------------------------------------------- |
| **스위치 (Switch)**   | 네트워크 내부 장비 간 데이터 전송                 |
| **라우터 (Router)**   | 네트워크 간 트래픽 라우팅                         |
| **방화벽 (Firewall)** | 네트워크 보안 정책을 적용하여 트래픽을 제어       |
| **L4 스위치**         | 부하 분산(Load Balancer) 기능 수행 (TCP/UDP 기반) |

**3️⃣ 스토리지 (Storage)**

| **구성 요소**                      | **설명**                                |
| ---------------------------------- | --------------------------------------- |
| **HDD (Hard Disk Drive)**          | 기계식 저장장치, 대용량 저장 가능       |
| **SSD (Solid State Drive)**        | 빠른 속도의 반도체 저장장치             |
| **DAS (Direct Attached Storage)**  | 서버에 직접 연결된 저장 장치            |
| **NAS (Network Attached Storage)** | 네트워크를 통해 접근 가능한 저장 장치   |
| **SAN (Storage Area Network)**     | 전용 네트워크를 통한 고성능 저장 시스템 |

**4️⃣ 랙 (Rack)**

| **구성 요소**   | **설명**                                       |
| --------------- | ---------------------------------------------- |
| **서버 랙**     | 데이터센터에서 서버를 정리하여 배치하는 장비   |
| **네트워크 랙** | 스위치, 라우터, 방화벽 등의 네트워크 장비 배치 |
| **스토리지 랙** | 스토리지 장비 배치 및 관리                     |

**✅ BGP, 네트워크 구성 요소 정리 표**

| **구분**              | **설명**                              |
| --------------------- | ------------------------------------- |
| **BGP**               | 서로 다른 AS 간 라우팅 프로토콜 (EGP) |
| **VLAN 확장 (VXLAN)** | 데이터센터 간 가상 네트워크 확장      |
| **컴퓨팅**            | 서버, CPU, 메모리                     |
| **네트워크**          | 스위치, 라우터, 방화벽, L4 스위치     |
| **스토리지**          | HDD, SSD, DAS, NAS, SAN               |
| **랙 시스템**         | 서버 랙, 네트워크 랙, 스토리지 랙     |

​	•	**BGP는 ISP 및 AS 간 최적의 경로를 결정하는 라우팅 프로토콜**

​	•	**Virtual Extension LAN(VXLAN) 및 네트워크 구성 요소는 클라우드 및 데이터센터 환경에서 필수적인 인프라**

​	•	**컴퓨팅, 네트워킹, 스토리지, 랙 시스템이 유기적으로 결합하여 안정적인 네트워크 인프라를 제공**





------

라우팅 프로토콜 구분 기준 (RIPv2, EIGRP, OSPF, IS-IS, BGP)

1. AS 기준

- IGP (interrior gateway protocol) - RIPv2, EIGRP, OSPF, IS-IS [서로 다른 AS 사용]
- EGP (exterior gateway protocol) - BGP (eth | ip | tcp | bgp) 포트번호: 179

2. 알고리즘 (경로 결정시 사용되는 알고리즘)

- distance vetor - RIPv2 (Hop count) 경로 계산 ,라우팅 수 따짐
- link state - OSPF, IS-IS
- advanced distance vector - EIGRP, BGP




------

### 라우팅 프로토콜 비교

OSPF: eth | ip | ospf

EIGRP: eth | ip | eigrp





------



```bash
1 - router bgp
2 - bgp router-id 1.1.1.1
3 - neighbor 1.1.12.2 remote-as 234
4 - network 1.1.1.0 mask 255.255.255.0
```

1. AS 번호는 2바이트와 4바이트 두 가지의 종류가 있음

	- 2바이트 AS 번호중 64496 에서 65534 까지는 사설 AS 번호이고, 23456 과 65535는 유보된 번호이다.
	- 4바이트 AS 번호중 65536 에서 65551까지는 사설 AS 번호이다.

IP 주소와 마찬가지로ㅓ IANA 에서 공인 AS 번호를 부여

2.  특별히 지정하지 않으면 OSPF가 라우터 ID를 지정하는 것과 동일한 방식으로 라우터 ID가 저장된다.
3. 해당 명령어로 eBGP 네이버의 IP 주소와 해당 네이버의 AS 번호를 지정한다.

- eBGP 네이버를 지정할 때 사용하는 IP 주소는 특별한 경우를 제외하고는 네이버와 직접 연결된 넥스트 홉 IP 주소를 사용한다.

4. BGP 를 통하여 다른 라우터에게 전송할 네트워크를 지정한다. 서브네팅되지 않은 네트워크를 지정할 때는 mask 옵션을 사용할 필요가 없다. 또한 network 명령어를 사용할 때 네트워크가 꼭 해당 라우터에 접속된 것이 아니어도 된다.

1.1.12.0/24와 같이 두 AS 사이에 있는 네트워크를 DMZ 라고 한다.



------

## BGP 테이블

BGP는 OSPF 링크 상태 데이터베이스, EIGRP의 토폴로지 데이터베이스와 유사한 BGP 테이블을 유지한다.

**네이버에게서 BGP 라우팅 정보를 수신하면 입력 정책을 적용한 다음 BGP 테이블에 저장한다. BGP 테이블에 저장된 경로 중에서 최적의 경로를 선택하고, 다른 라우팅 프로토콜과 AD를 비교한 다음 라우팅 테이블에 저장한다.**

또, BGP 테이블에 있는 네트워크에 출력 정책을 적용한 다음 인접 라우터에게 라우팅 정보를 전송한다.



```bash
#show ip bgp
```





