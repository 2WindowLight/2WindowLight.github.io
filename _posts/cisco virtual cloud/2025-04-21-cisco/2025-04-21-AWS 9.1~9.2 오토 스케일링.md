---
title: <h0>AWS 9.1~9.2 오토 스케일링</h0>
author: cotes 
categories: [cisco virtual cloud,2025-04-21-cisco]
tags: [Network,AWS]






---

# 스케일링

### **AWS 오토스케일링(Auto Scaling) 개념 및 수직/수평 스케일링 설명**

---

### 1.스케일링 이란?

* IT측면에서 스케일링이란 IT 자원을 확장하거나 축소하는 기능
* 항상 고정적이지 않고 특정 상황이나 이벤트에 따라 가변적입니다.

#### **오토스케일링(Auto Scaling)이란?**

AWS 오토스케일링은 애플리케이션의 부하 변화에 따라 **EC2 인스턴스의 수를 자동으로 조정**하는 서비스입니다.  
- **목적**:  
  - **성능 유지**: 트래픽 증가 시 인스턴스 추가로 처리 능력 확보.  
  - **비용 최적화**: 트래픽 감소 시 불필요한 인스턴스 종료.  
  - **고가용성**: 장애 발생 시 자동으로 인스턴스 교체.  
- **핵심 요소**:  
  - **오토스케일링 그룹(Auto Scaling Group, ASG)**: 동일한 설정의 인스턴스 집합.  
  - **시작 템플릿(Launch Template)**: 인스턴스의 AMI, 인스턴스 유형, 보안 그룹 등 설정 정의.  
  - **스케일링 정책(Scaling Policy)**: CPU 사용률, 네트워크 트래픽 등 지표 기반 확장/축소 규칙.

---

![IMG_0751](../../../assets/cisco_post_img/2025-04-21-AWS 9.1~9.2 오토 스케일링/IMG_0751.jpeg)

#### **2. 수직 스케일링(Vertical Scaling) vs. 수평 스케일링(Horizontal Scaling)**

| 구분         | 수직 스케일링 (Vertical Scaling)                             | 수평 스케일링 (Horizontal Scaling)             |
| ------------ | ------------------------------------------------------------ | ---------------------------------------------- |
| **정의**     | 단일 인스턴스의 사양(CPU, 메모리 등)을 업/다운그레이드.      | 인스턴스 수를 늘리거나 줄여 처리 능력 조정.    |
| **예시**     | t2.micro → t2.large로 인스턴스 유형 변경.                    | 오토스케일링 그룹에 인스턴스 2개 → 5개로 증가. |
| **장점**     | 애플리케이션 아키텍처 변경 없이 즉시 성능 향상.              | 무중단 확장, 장애 분산 가능.                   |
| **단점**     | - 인스턴스 중지 필요 (다운타임 발생 가능).<br>- 하드웨어 한계 존재 (최대 사양 제한). | - 분산 아키텍처 설계 필요 (Stateless 권장).    |
| **AWS 구현** | 수동 작업 또는 AWS Systems Manager 등 활용.                  | **AWS 오토스케일링**을 통해 자동화.            |

---

#### **3. AWS 오토스케일링의 작동 방식 (수평 스케일링 중심)**
1. **오토스케일링 그룹 생성**  
   - 시작 템플릿을 기반으로 인스턴스의 최소/최대/희망 개수 설정.  
   - 예: 최소 2개, 최대 10개, 희망 4개.

2. **스케일링 정책 설정**  
   - **트리거 지표**: CPU 사용률 > 70%, 네트워크 IN/OUT, 사용자 정의 CloudWatch 지표 등.  
   - **정책 유형**:  
     - **Target Tracking**: 목표 값(예: CPU 50%)을 유지하도록 자동 조정.  
     - **Step Scaling**: 지표 임계값에 따라 단계별로 인스턴스 증감.  
     - **Simple Scaling**: 단일 임계값과 조정 동작 설정.

3. **확장(Scale-Out) 예시**:  
   - CPU 사용률이 70% 초과 → 오토스케일링 그룹이 인스턴스 2개 추가.  
   - Elastic Load Balancer(ELB)가 새 인스턴스에 트래픽 분배.

4. **축소(Scale-In) 예시**:  
   - CPU 사용률이 30% 미만 → 오토스케일링 그룹이 인스턴스 1개 제거.  
   - ELB가 종료될 인스턴스로의 트래픽 차단.

---

#### **4. 수직 스케일링의 AWS 구현 방법**
- **수동 작업**:  
  1. 인스턴스 중지 → 인스턴스 유형 변경 → 재시작.  
  2. **다운타임 발생** (재시작 필요).  
- **AWS 도구 활용**:  
  - **AWS Systems Manager (SSM)**: 스크립트를 통해 자동화 가능 (다운타임 최소화).  
  - **RDS/Aurora**: 데이터베이스 인스턴스 크기를 콘솔에서 즉시 변경 (일부 다운타임 발생).  

---

#### **5. 사용 사례 비교**
- **수직 스케일링 적합 사례**:  
  - 단일 인스턴스에서 실행되는 레거시 애플리케이션.  
  - 데이터베이스 서버의 CPU/메모리 부족 현상.  
- **수평 스케일링 적합 사례**:  
  - 웹 서버 팜(Stateless 아키텍처).  
  - 마이크로서비스 기반의 클라우드 네이티브 애플리케이션.  

---

#### **6. 주의 사항**
- **수평 스케일링**:  
  - **Stateless 설계 권장**: 세션 정보는 외부 저장소(ElastiCache, DynamoDB)에 저장.  
  - **Health Check 필수**: ELB와 연동해 비정상 인스턴스 자동 교체.  
- **수직 스케일링**:  
  - **백업 필수**: 인스턴스 크기 변경 실패 시 롤백 방지.  
  - **예약 인스턴스 고려**: 인스턴스 유형 변경 시 예약 인스턴스 할인 적용 확인.  

---

### **요약**
- **AWS 오토스케일링**은 **수평 스케일링**을 통해 트래픽 변화에 탄력적으로 대응합니다.  
- **수직 스케일링**은 인스턴스 사양 변경으로 즉시 성능을 높이지만, 다운타임과 설계 제약이 따릅니다.  
- **최적의 아키텍처**는 수평 스케일링을 기본으로 하고, 특수한 경우 수직 스케일링을 조합해 사용합니다.
- **수직 스케일링**
  - **스케일 업: IT 자원에 부하가 증가하면 자원 용량 확장**
  - **스케일 다운: IT 자원에 부하가 감소하면 자원 용량 감소**
- **수평 스케일링**
  - **스케일 아웃: IT 자원에 부하가 증가하면 자원 수량 확장**
  - **스케일 인: IIT 자원에 부하가 감소하면 자원 수량 축소**

------

------

## **AWS 오토 스케일링(Auto Scaling) 서비스**

---

#### **1. AWS 오토 스케일링 개요**
AWS 오토 스케일링은 **애플리케이션의 부하 변화**에 따라 **EC2 인스턴스의 수(클라우드의 자원)를 자동으로 조절**하는 서비스입니다.  
- **목적**:  
  - **가용성 보장**: 인스턴스 장애 시 자동 교체.  
  - **탄력성 확보**: 트래픽 증가/감소에 맞춰 인스턴스 수 확장/축소.  
  - **비용 최적화**: 필요 이상의 인스턴스 운용 방지.  
- **핵심 원리**:  
  - **수평 확장(Horizontal Scaling)**: 인스턴스 수를 늘리거나 줄여 처리 능력 조정.  
  - **클라우드워치(CloudWatch) 지표** 기반 자동화 (CPU 사용률, 네트워크 트래픽 등).

---

#### **2. 오토 스케일링 구성 요소**

##### **(1) 오토 스케일링 그룹(Auto Scaling Group, ASG)**  
- **정의**: **EC2 인스턴스 모음을 생성하며, 최소 및 최대 인스턴스 수를 지정하여 그룹 내 해당 범위로 인스턴스 수를 유지합니다.** **-> 안정성을 위해**
- **설정 항목**:  
  - **최소/최대/희망 용량**: 유지할 인스턴스 수 범위 (예: 최소 2, 최대 10, 희망 4).  
  - **가용 영역(AZ) 분산**: 장애 격리를 위해 여러 AZ에 인스턴스 배치.  
  - **헬스 체크(Health Check)**: 인스턴스 상태 모니터링 (EC2 또는 ELB 상태 확인).

##### **(2) 구성 템플릿**  
- **정의**: 인스턴스 생성 시 필요한 구성을 정의한 템플릿.  
- **포함 정보**:  
  - AMI ID, 인스턴스 유형(t2.micro 등), 키 페어, 보안 그룹, IAM 역할.  
  - 스토리지 구성, 사용자 데이터(User Data) 스크립트.  
- **시작 구성(Launch Configuration)**: 시작 템플릿의 이전 버전 (현재는 템플릿 권장).

##### **(3) 조정 옵션(Scaling Policies)**  
- **정의**: 인스턴스 확장/축소를 트리거하는 규칙.  
- **종류**:  
  - **수동 조정**: 사용자가 직접 인스턴스 수 지정.  
  - **동적 조정**: 지표 기반 자동 조정 (대상 추적, 단계 조정 등).  
  - **예약 조정**: 미리 정의된 일정에 따라 조정.  
  - **예측 조정**: 지난 측정값으로 누적된 기록을 이용하여 트래픽 예측으로 사전 확장.

---

#### **3. 인스턴스 수명 주기(Lifecycle)**  
1. **시작(Launch)**: 시작 템플릿을 기반으로 인스턴스 생성.  
2. **활성(InService)**: 정상 작동 중이며 트래픽 처리 가능.  
3. **종료(Terminate)**: 축소 정책 또는 장애로 인해 인스턴스 제거.  
- **수명 주기 후크(Lifecycle Hooks)**:  
  - 인스턴스가 특정 상태(예: Terminating)에 진입할 때 **사용자 정의 작업 수행** (예: 데이터 백업).  
  - 후크 완료 전까지 상태 유지 (예: `Pending:Wait`).

---

#### **4. 인스턴스 확장(Scale-Out) 및 축소(Scale-In)**  
- **확장(Scale-Out)**:  
  - 트래픩 증가 → 인스턴스 수 증가.  
  - 예: CPU 사용률이 70% 초과 시 인스턴스 2개 추가.  
- **축소(Scale-In)**:  
  - 트래픽 감소 → 인스턴스 수 감소.  
  - 기본 정책: 가장 오래된 인스턴스 또는 사용자 지정 정책으로 선택적 종료.
- **인스턴스 축소에 따른 이벤트**
  - **케이스**
    - 오토 스케일링 그룹의 크기를 수동으로 줄이는 경우
    - 지정된 수요 감소에 따라 오토 스케일링 그룹의 크기를 자동으로 조정
    - 특정 시간에 스케일링 그룹의 크기를 자동으로 줄이는 예약을 한 경우
  
  - **발생**
    - 오토 스케일링은 하나 이상의 인스턴스를 종료합니다.
    - 인스턴스가 완전히 종료되면 오토 스케일링에서 삭제되어 종료됨 상태에 들어갑니다.
    - 인스턴스를 종료할때 바로 삭제되지 않고 일정 시간 대기하기도 합니다.
  

---

#### **5. 오토 스케일링 조정 옵션**

##### **(1) 수동 조정**  
- **정의**: 사용자가 직접 인스턴스 수 지정.  
- **사용 사례**: 테스트 환경, 특정 이벤트 대비.  
- **예**: ASG의 최소/최대 용량을 직접 변경.

##### **(2) 동적 조정**  

* **정의:** 트래픽 변화에 따라 오토 스케일링 그룹의 용량을 조정합니다.

- **대상 추적 조정(Target Tracking Scaling)**  
  - **정의**: 특정 지표(예: CPU 50%)를 목표 값으로 유지하도록 자동 조정.  
  - **예**: CPU 사용률을 50%로 유지하기 위해 인스턴스 증감.  
- **단계 조정(Step Scaling)**  
  - **정의**: 지표 임계값 위반 정도에 따라 단계별로 조정.  
  - **예**:  
    - CPU 60% 초과 → 1개 추가.  
    - CPU 80% 초과 → 2개 추가.  
- **단순 조정(Simple Scaling)**  
  - **정의**: 임계값 기준으로 임계값을 넘어서는 크기와 무관하게 단일하게 조정합니다 (구형 정책, 단계 조정 권장).

##### **(3) 예약 조정(Scheduled Scaling)**  
- **정의**: 미리 알려진 트래픽 패턴(예: 출시 이벤트)에 따라 일정 기반 조정.  
- **예**: 매주 금요일 오후 6시에 최소 용량을 10으로 설정.

##### **(4) 예측 조정(Predictive Scaling)**  
- **정의**: 머신러닝을 사용해 **미래 트래픽을 예측**하여 사전 확장.  
- **동작**:  
  1. 과거 CloudWatch 지표 분석.  
  2. 예측된 부하에 맞춰 인스턴스 수 조정.  
- **사용 사례**: 정기적 트래픽 피크(예: 블랙프라이데이).

---

#### **6. 오토 스케일링의 장점**  
- **탄력성**: 트래픽 변동에 실시간 대응.  
- **내결함성(Fault Tolerance)**: 장애 인스턴스 자동 교체.  
- **비용 절감**: 필요 시에만 리소스 사용.  
- **통합 관리**: ELB(Elastic Load Balancing)와 연동해 트래픽 분산.  

---

### **요약**  
* AWS 오토 스케일링은 **시작 템플릿**으로 인스턴스 설정을 정의하고, **오토 스케일링 그룹**을 통해 인스턴스 수를 관리합니다.  
* **동적 조정**은 실시간 지표를 기반으로, **예약/예측 조정**은 사전 계획된 트래픽에 대응합니다.  
* 인스턴스의 **수명 주기**와 **확장/축소 정책**을 결합해 애플리케이션의 가용성과 효율성을 동시에 확보합니다.