---
title: <h0>Test Network Ip routing</h0>
author: cotes   
categories: [cisco virtual cloud]
tags: [Network]







---

# Test Network Ip Routing

------

## R1

```bash
int lo 0 # 루프백 지정
ip address 1.1.1.1 255.255.255.0
exit
int e0/0
ip add 1.1.12.1 255.255.255.0
no sh
exit

```

## R2

```bash
int lo 0
ip add 1.1.2.2 255.255.255.0

int e0/0
ip add 1.1.12.2 255.255.255.0
no sh

int e0/1
ip add 1.1.23.2 255.255.255.0
no sh
exit
```

## R3

```bash
int lo 0
ip add 1.1.3.3 255.255.255.0

int e0/1
ip add 1.1.23.3 255.255.255.0
no sh

int e0/0
ip add 1.1.34.3 255.255.255.0
no sh
exit
```

## R4

```bash
int lo 0
ip add 1.1.4.4 255.255.255.0
int e0/0
ip add 1.1.34.4 255.255.255.0
no sh
exit
```

**라우팅 프로토콜 - 모든 라우터에서 동일하게 설정**

```bash
router eigrp 1
net 0.0.0.0
```





------

### AS (RIP, EIFRP, OSPF, BGP, IS-IS)

IGP: RIP, EIGRP, IS-IS, OSPF

EGP:BGP

------

## **알고리즘**

- distance vector: **RIP** 
- link state: **OSPF, IS-IS**
- advanced distance vector: **EIGRP, BGP

------

##  자동 축약 (CCNP 시험)

주 네트웤 경계에서는 주 네트웤만 광고한다.

주 네트워크란 서브넷팅을 하지 않았을 때의 네트워크를 의미

주 네트워크 경계는 라우팅 정보에 포함된 네트워크의 주 네트워크와 라우티 ㅇ정보가 전송되는 인터페이스의 주 네트워크가 다른 지점



------

## 링크 상태 라우팅 프로토콜 46p

링크 상태 라우팅 프로토콜은 추가적으로 특정 네트워크가 접속되어 있는 라우터 정보(ID), 그 라우터와  인접한 라우터 정보 등을 광고한다.

링크 상태 라우팅 ...- OSPF

------

## 클래스리스 라우팅 프로토콜 47p

광고(전송)시 서브넷 마스크 정보도 포함시킨다. (요즘 사용되는 모든 라우팅 프로토콜이 여기에 포함된다.)

------

## IGP와 EGP 48

동일 조직에 의한 라우팅 정책이 적용되는 네트워크를 하나의 AS 이라고 한다. 

동일 AS 내부에서 사용되는 라우팅 프로토콜을 **IGP**, 서로 다른 AS 간에 사용되는 라우팅 프로토콜을 **BGP**

------

## 경로 결정 방법과 라우팅 테이블 49P

다수개의 라우팅 프로토콜이 설정된 라우터에서 특정 목적지로 가는 경로는 다음과 같은 기준과 절차에 의해 결정된다.

1) 동일 라우팅 프로토콜 내에서 특정 목적지로 가는 **경로가 다수개 있을 때 메트릭**이 가장 낮은 것을 선택
1) 다수개의 라우팅 프로토콜이 동일한 네트워크 정보를 광고할 때는 **AD 값이 낮은 라우팅 프로토콜**이 계산한 경로가 라우팅 테이블에 설치된다.
1) 일단 라우팅 테이블에 저장된 다음에는 패킷 전송시 패킷의 목적지 주소와 라우팅 테이블에 있는 네트워크 주소의 서브넷 마스크 길이가 가장 길게 일치되는 경로를 선택한다. **이것을 Longest match rule 이라고 한다.**



------

### 매트릭

라우팅 프로토콜들이 최적 경로를 선택하는 기준을 메트릭(Metric) 이라고 한다.

### metric : 경로 결정 기준 

| 라우팅 프로토콜 |            메트릭             |
| :-------------: | :---------------------------: |
|       RIP       |           홉 카운트           |
|      EIGRP      | 속도, 지연, 신뢰도, 부하, MTU |
|      OFPF       |         코스트 (속도)         |
|       BGP       |        속성(attribute)        |



------

## 라우팅 프로토콜간의 우선 순위

|  라우팅 프로토콜에 따른 경로의 종류  |  AD  |
| :----------------------------------: | :--: |
|         직접 접속된 네트워크         |  0   |
|  로컬 인터페이스를 사용한 정적 경로  |  0   |
| 넥스트 홉 IP 주소를 사용한 정적 경로 |  1   |
|   EIGRP 축약 경로 (summary route)    |  5   |
|               외부 BGP               |  20  |
|              내부 EIGRP              |  90  |
|                 OSPF                 | 110  |
|                IS-IS                 | 115  |
|                 RIP                  | 120  |
|              외부 EIGRP              | 170  |
|               내부 BGP               | 200  |

AD 값이 낮은 라우팅 프로토콜이 계산한 경로가 라우팅 테이블에 설치된다.



------





![IMG_0386](/Users/changhee/2WindowLight.github.io/_posts/images/2025-02-05-Test Network Ip Routing /IMG_0386.png)

1.  라우팅 테이블에 저장된 네트워크의 종류를 표시하는 코드이다.
2.  디폴트 게이트웨이(default gateway)가 설정되지 않았음을 표시한다

3. 1.0.0.0  네트워크가 서브넷명 되어 있으며, 서브넷의 수량은 6개이고, 1치 마스크 길이 있다. 이치점 서브넷팅 된 네트워크를 가지고 있는 메이저 네트워크(TOSIO DESOR) 푸드(aie Tout)라고 하고, 서브넷팅 된 네트워크를 차일드 루트(chld Fou) 라고 다

10008은 페이린트 루트이고, 111.024, 111132, 1.1 2 0124 등은 차일드 루트 이다.

4.  C (connected)는 현재의 라우터에 직접 접속되어 있는 네트워크를 나타낸다.

5.  'T'(local)은 현재의 라우터 인터페이스에 설정된 주소를 나타낸다.

6. 목적지 네트워크를 광고받은 라우팅 프로토콜을 표시한다. 즉, 1.1.1.024 네트워크는 BIG통하여 광고 받았음을 의미한다.

7.  목적지 네트워크를 의미한다.

8. 목적지 네트워크의 서브넷 마스크 길이를 표시한다.

9.  목적지 네트워크의 AD 값을 표시한다.

10. 목적지 네트워크의 메트릭 값을 표시한다.

11. 목적지 네트워크로 가는 넥스트 홉 IP 주소를 표시한다.

12. 목적지 네트워크에 대한 라우팅 정보를 최종적으로 수신한 후 경과한 시간을 의미한다.

13. 목적지 네트워크로 가는 인터페이스를 표시한다.11 과 13의 의미는 다르지만 역할은 같다. 즉 목적지 네트워크로 가는 출구를 알려준다.

14. 특정 목적지 네트워크에 대해서 출력 인터페이스(또는 넥스트 홉 IP 주소)가 두 개 이상 설정되어 있으면 해당 네트워크로 가는 경로가 여러 개 있고, 트래픽의 부하가 분산됨을 의미한다.

15. 2.0.0.0/8 네트워크가 모두 /24로 서브넷팅 되어 있음을 의미한다.



------

## 라우팅 네트워크 종류

멀티 캐스트  - 목적지 주소가 224.0.0.0 에서 239.255.255.255 사이의 IP 주소로 설정된 전송방식으로 해당 IP 주소를 사용하는 장비들만 이 패킷을 수신 OSPF

유니캐스트 - 



------

## 브로트 캐스트 멀티 엑세스



non broadcast multi access: LAN 

point to point network: WAN

이 두개의 구분은 데이터를 전달할때 헤더를 이더넷으로 띄우면 BMA, HDLC, PPD(WAN) 으로 씌우면 p-to-p

broadcast network

------

