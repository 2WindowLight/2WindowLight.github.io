---
title: <h0>[Network] OSPF3 </h0>
author: cotes   
categories: [cisco virtual cloud]
tags: [Network]











---

![IMG_0416](/Users/changhee/2WindowLight.github.io/_posts/cisco virtual cloud/assets/IMG_0416-9263282.png)



## λ„¤νΈμ›ν¬ λ³΄μ•

λ„¤μ΄λ²„ μΈμ¦ - clear text λ°©μ‹

```bash
conf t
int e0/0
ip ospf authentication
ip ospf authentication-key cisco
```

λ„¤μ΄λ²„ μΈμ¦ - MD5 λ°©μ‹ μΌλ΅ ν•΄μ‹±

```bash
conf t
int e0/0
ip sofp authentication message-digest
ip ospf message-digest-key 1 cisco
```



* **λ™μΌν• μ—μ–΄λ¦¬μ–΄μ— μ†μ†λ λ¨λ“  λΌμ°ν„°μ μΈμ¦λ°©μ‹μ€ λ™μΌν•΄μ•Ό ν•λ‹¤.**
* **μΈμ¦κΈ°λ” λ„¤μ΄λ²„κ°„μ—λ§ μΌμΉν•λ©΄ λλ‹¤.**



### R1μ—μ„ MD5λ΅ μ—μ–΄λ¦¬μ–΄ μΈμ¦ν•κΈ°

```bash
router ospf
area 1 authentication message-digest
exit

int e0/0
ip ospf message-digest-key 1 md5 cisco
```

### R2, R3μ—μ„ MD5λ΅ μ—μ–΄λ¦¬μ–΄ μΈμ¦ν•κΈ°λ„ μ„μ™€ κ°™μ΄ ν•΄μ£Όλ©΄ λλ‹¤.

------

### μ—μ–΄λ¦¬μ–΄ 0μ„ ν‰λ¬ΈμΌλ΅ μΈμ¦ν•κΈ°

```
R2
router ospf 1
area 0 authentication
exit
int e0/1
ip ospf authentication-key cisco

R3
router ospf 1
area 0 authentication
exit
int e0/2
ip ospf authentication-key cisco

R4
router ospf 1
area 0 authentication
exit
int e0/1
ip ospf authentication-key cisco
int 0/2
ip ospf authentication-key cisco
```



------

## OSPF ν¨μ‹λΈ μΈν„°νμ΄μ¤

β€‹	β€Ά	OSPFμ—μ„ **ν¨μ‹λΈ μΈν„°νμ΄μ¤**λ¥Ό μ„¤μ •ν•λ©΄ ν•΄λ‹Ή μΈν„°νμ΄μ¤μ—μ„ **ν—¬λ΅(Hello) ν¨ν‚·μ„ λ³΄λ‚΄μ§€ μ•μ**

β€‹	β€Ά	μ¦‰, **λ„¤μ΄λ²„λ¥Ό λ§Ίμ§€ μ•μ** β†’ OSPF λΌμ°ν… μ •λ³΄ κµν™μ΄ μ°¨λ‹¨λ¨

R4 μ™Όμ½

```
router ospf 1
int f0/0
ip ospf 1 area 0
```

R4 μ¤λ¥Έμ½

```
int f0/1
ip ospf 1 area 0 
```

β€‹	β€Ά	f0/0, f0/1 λ¨λ‘ OSPF ν™μ„±ν™”

β€‹	β€Ά	**μ–‘μ½μ—μ„ ν—¬λ΅ ν¨ν‚·μ„ μ†΅μ‹ ν•μ—¬ OSPF λ„¤μ΄λ²„ λ§Ίμ**

------

**ν¨μ‹λΈ μΈν„°νμ΄μ¤ μ μ© (λ„¤μ΄λ²„ λ§Ίμ§€ μ•λ„λ΅ μ ν•)**

```
router ospf 1
passive-interface f0/1
```

 **μ΄μ  f0/1μ—μ„ ν—¬λ΅ ν¨ν‚·μ΄ λ‚κ°€μ§€ μ•μ**

 **λ”°λΌμ„ f0/1μ„ ν†µν•΄ OSPF λ„¤μ΄λ²„λ¥Ό λ§Ίμ„ μ μ—†μ**

ν¨μ‹λΈλ¥Ό μ£Όλ” μκ°„ ν—¬λ΅ ν¨ν‚·μ΄ μ•λ‚κ°€λ―€λ΅ λ„¤μ΄λ²„λ¥Ό μ ν•ν•  μ μμ

λ”°λΌμ„ ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ OSPF λ„¤μ΄λ²„κ°€ λ§Ίμ–΄μ§€μ§€ μ•μΌλ―€λ΅ μλ»λ OSPF λΌμ°ν… μ •λ³΄λ΅ μΈν• ν”Όν•΄λ¥Ό μµμ†ν™” κ°€λ¥



π’΅ **ν¨μ‹λΈ μΈν„°νμ΄μ¤λ¥Ό μ„¤μ •ν•λ©΄ OSPF λ„¤μ΄λ²„λ¥Ό μ ν•ν•  μ μμ!**

β” **OSPF λ„¤μ΄λ²„λ¥Ό λ§Ίμ„ ν•„μ”κ°€ μ—†λ” μΈν„°νμ΄μ¤μ—μ„ λ¶ν•„μ”ν• νΈλν”½μ„ λ°©μ§€**

β” **μλ»λ OSPF λΌμ°ν… μ •λ³΄λ΅ μΈν• ν”Όν•΄λ¥Ό μµμ†ν™”**

β” **λΌμ°ν… μ •λ³΄λ” μ μ§€ν•λ, ν•΄λ‹Ή μΈν„°νμ΄μ¤μ—μ„ OSPF λ„¤μ΄λ²„λ¥Ό λ§Ίμ§€ μ•λ„λ΅ ν•¨**

β” **Loopback μΈν„°νμ΄μ¤λ¥Ό OSPFμ— μ¶”κ°€ν•  λ• ν¨μ‹λΈ μΈν„°νμ΄μ¤λ¥Ό μμ£Ό μ‚¬μ©**



**μ •λ¦¬**

β€Ά	**ν¨μ‹λΈ μΈν„°νμ΄μ¤λ¥Ό μ μ©ν•λ©΄ ν•΄λ‹Ή μΈν„°νμ΄μ¤μ—μ„ ν—¬λ΅ ν¨ν‚·μ„ λ³΄λ‚΄μ§€ μ•μ!**

β€Ά	**OSPF λ„¤μ΄λ²„ ν•μ„±μ΄ μ°¨λ‹¨λμ§€λ§, OSPF λΌμ°ν… μ •λ³΄λ” μ μ§€λ¨**

β€Ά	**λ¶ν•„μ”ν• νΈλν”½ λ°©μ§€ λ° λ³΄μ• ν–¥μƒ ν¨κ³Ό μμ** π€

------

## κ°€μƒ λ§ν¬μ™€ λ””λ§¨λ“ μ¨ν‚·

OSPFμ λ¨λ“  μ—μ–΄λ¦¬λ” λ°λ“μ‹ λ°±λ³Έ μ—μ–΄λ¦¬μ–΄μ™€ μ ‘μ†ν—¤μ•Όν•λ‹¤. κ·Έλ¬λ‚ λ„¤νΈμ›ν¬ κ±Έμ •μ„ λ³€κ²½ν•λ” κ²½μ°, λ„¤νΈμ›ν¬μ νΉμ • λ§ν¬κ°€ λ‹¤μ΄λ κ²½μ°, λ‘κ°μ ν•©λ³‘ν•λ” λ“±μ κ²½μ°μ— μ§μ ‘ λ°±λ³Έ μ—μ–΄λ¦¬μ–΄μ™€

### nssa μ κ±°

```bash
R4
router ospf 1
no area 45 nssa

R5
router ospf 1
no area 45 nssa
```

R5

```
conf t
int e1/0
ip add 1.1.56.5 255.255.255.0
no sh
ip ospf 1 area 56
```

R6

```
conf t
int lo 0
ip add 1.1.6.6 255.255.255.0
ip ospf network point-to-point
int e1/0
ip add 1.1.56.6 255.255.255.0
no sh
!
router ospf 1
router-id 1.1.6.6
network 1.1.6.6 0.0.0.0 area 56
network 1.1.56.6 0.0.0.0 area 56
```



### κ°€μƒ λ§ν¬ μ„¤μ •ν•κΈ° 334p

OSPFμ—μ„λ” **λ¨λ“  μμ—­(Area)**μ΄ **λ°±λ³Έ μμ—­(Area 0, Backbone)**κ³Ό μ§μ ‘ μ—°κ²°λμ–΄μ•Ό ν•¨!

ν•μ§€λ§ **Area 0κ³Ό μ§μ ‘ μ—°κ²°λμ§€ μ•μ€ μμ—­μ΄ μμ„ λ•**, κ·Έ μμ—­μ„ μ—°κ²°ν•κΈ° μ„ν•΄ **κ°€μƒ λ§ν¬(Virtual Link)**λ¥Ό μ‚¬μ©ν•¨!

```
router ospf 1
area 45 virtual-link 1.1.5.5

router ospf 1
area 45 virtual-link 1.1.4.4
area 0 authentication
```





------

## OSPF νƒ€μ΄λ¨Έ

ν—¬λ΅μ™€ λ°λ“ μ£ΌκΈ°

### ν—¬λ΅ μ£ΌκΈ° λ²”μ„

```
ip ospf hello-interval ?
```

### **λ°λ“ μ£ΌκΈ° λ²”μ„**

```
ip ospf dead-interval ?
```

**ospf neighbor ν•μ„±μ‹ hello ν¨ν‚·λ‚΄ λ™μΌν•΄μ•Ό ν•λ” μ •λ³΄**

- **hello/dead (hello x 4 ) interval**
- **area id**
- **μ•”νΈ(password)**
- **stub flag**

**cf. mtu sizeλ„ κ°™μ•„μ•Ό ν•¨**



μ¬μ „μ†΅ νƒ€μ΄λ¨Έ

OSPF ν¨ν‚·μ¤‘μ—μ„ DBD, LSA λ° LSRμ€ μ •μ†΅ν›„



LSA

LSAck



------

## LSA κ·Έλ£Ή νμ΄μ‹± νƒ€μ΄λ¨Έ