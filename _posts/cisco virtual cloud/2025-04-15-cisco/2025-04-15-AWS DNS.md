---
title: <h0>AWS 고급 네트워킹 서비스 - DNS</h0>
author: cotes 
categories: [cisco virtual cloud,2025-04-15-cisco]
tags: [Network,AWS]

---

# AWS 고급 네트워킹 서비스 - DNS



---

#### **1. DNS 기본 개념**
**DNS(Domain Name System)**는 도메인 이름(예: `www.example.com`)을 IP 주소(예: `192.0.2.1`)로 변환하는 시스템입니다.  
- **목적**: 사용자가 복잡한 IP 주소 대신 기억하기 쉬운 도메인 이름으로 리소스에 접근할 수 있도록 합니다.  
- **동작 원리**:  
  1. 사용자가 브라우저에 도메인 입력 → 로컬 DNS 서버에 질의.  
  2. 로컬 DNS 서버가 루트 DNS, TLD DNS, 권한 있는 DNS를 순차적으로 질의해 IP 주소 획득.  
  3. 획득한 IP 주소로 사용자 트래픽 라우팅.  

---

#### **2. Amazon Route 53 소개**
AWS의 **완전관리형 DNS 서비스**로, **고가용성**과 **확장성**을 갖춘 글로벌 서비스입니다.  
- **이름 유래**: DNS 포트 번호 53에서 비롯됨.  
- **주요 기능**:  
  - **도메인 등록 및 관리**  
  - **DNS 라우팅**  
  - **상태 확인(Health Check)**  
  - **트래픽 관리**  

---

#### **3. Route 53의 핵심 기능**  

##### **(1) 도메인 등록**  
- **도메인 구매/관리**: `.com`, `.net`, `.io` 등 400개 이상의 TLD(Top-Level Domain) 지원.  
- **자동 갱신**: 도메인 만료 시 자동 갱신 설정 가능.  
- **DNSSEC 지원**: DNS 스푸핑 공격 방지를 위한 보안 확장 기능.  

##### **(2) DNS 라우팅**  
- **호스팅 존(Hosted Zone)**: 도메인의 DNS 레코드 집합을 관리하는 컨테이너.  
  - **퍼블릭 호스팅 존**: 인터넷 접근 가능한 리소스(예: 웹 서버)용.  
  - **프라이빗 호스팅 존**: VPC 내부 리소스(예: 내부 API)용.  
- **레코드 유형**:  
  - **A 레코드**: IPv4 주소 매핑.  
  - **AAAA 레코드**: IPv6 주소 매핑.  
  - **CNAME**: 도메인 별칭 설정.  
  - **ALIAS**: AWS 리소스(예: S3, CloudFront)에 대한 별칭.  

##### **(3) 트래픽 관리**  
다양한 **라우팅 정책**을 통해 트래픽 분산:  
- **단순 라우팅(Simple)**: 기본 라우팅 (1개의 리소스로만 연결).  
- **가중치 기반(Weighted)**: 트래픽을 지정된 비율로 분배 (예: A:B = 70:30).  
- **지연 시간 기반(Latency)**: 사용자 위치에서 가장 낮은 지연 시간을 제공하는 리전으로 라우팅.  
- **지리 위치 기반(Geolocation)**: 사용자의 지리적 위치에 따라 트래픽 분기 (예: 한국 사용자는 서울 리전으로).  
- **장애 조치(Failover)**: Active-Standby 구성으로 주 리소스 장애 시 백업 리소스로 전환.  
- **다중 응답(Multivalue)**: 여러 IP에 트래픽 분산 + Health Check로 장애 노드 제외.  

##### **(4) 상태 확인(Health Check)**  
- **리소스 모니터링**: 엔드포인트(HTTP, TCP, HTTPS)의 가용성을 주기적으로 확인.  
- **자동 장애 조치**: Health Check 실패 시 트래픽을 정상 리소스로 재라우팅.  
- **CloudWatch 연동**: 지표 저장 및 알림 설정 가능.  

---

#### **4. Route 53의 주요 사용 사례**  
- **글로벌 애플리케이션**: 지연 시간 기반 라우팅으로 최적의 AWS 리전 선택.  
- **재해 복구(DR)**: 장애 조치 라우팅으로 Active-Standby 구성.  
- **A/B 테스트**: 가중치 기반 라우팅으로 트래픽 분할.  
- **마이크로서비스**: 프라이빗 호스팅 존으로 VPC 내부 서비스 검색.  

---

#### **5. AWS 서비스와의 통합**  
- **ELB(Elastic Load Balancer)**: ALIAS 레코드로 로드 밸런서에 트래픽 전달.  
- **S3/CloudFront**: 정적 웹 사이트 호스팅 시 도메인 연결.  
- **ECS/EKS**: 컨테이너 기반 서비스의 DNS 관리.  
- **Lambda@Edge**: 글로벌 트래픽에 맞춘 동적 라우팅.  

---

#### **6. 보안 및 가격 정책**  
- **보안**:  
  - **IAM 정책**: 세분화된 접근 제어.  
  - **DNSSEC**: 데이터 무결성 보장.  
  - **VPC 보안 그룹**: 프라이빗 호스팅 존 접근 제한.  
- **가격**:  
  - **호스팅 존**: 월 $0.50/존.  
  - **쿼리 비용**: 월 1억 건당 $0.40~$0.90.  
  - **도메인 등록**: TLD별 상이 (예: `.com` 연간 $12).  
  - **Health Check**: 월 $0.50~$3.00/체크.  

---

#### **7. 장단점**  
- **장점**:  
  - AWS 생태계와의 원활한 통합.  
  - 고급 라우팅 정책으로 복잡한 아키텍처 지원.  
  - 100% SLA 가용성 보장.  
- **단점**:  
  - 타사 DNS 대비 쿼리 비용이 높을 수 있음.  
  - 초보자에게 설정이 복잡할 수 있음.  

---

### **결론**  
Amazon Route 53은 **고급 DNS 관리**부터 **글로벌 트래픽 최적화**까지 다양한 기능을 제공하는 AWS의 핵심 서비스입니다.  
- **복잡한 라우팅 정책**과 **상태 확인**을 통해 고가용성 애플리케이션을 구축할 수 있습니다.  
- **AWS 리소스와의 통합**으로 클라우드 네이티브 아키텍처 구현이 용이합니다.

------

### **도메인 구조 (Domain Structure)**  
도메인 이름은 **계층적 구조**로 구성되며, 오른쪽에서 왼쪽으로 상위 → 하위 레벨로 구분됩니다.  

---

#### **1. 루트 도메인 (Root Domain)**  
- **정의**: 도메인 계층의 최상위 레벨로, 생략된 빈 문자열(`.`)로 표기됩니다.  
- **예시**: `www.example.com.` (마지막 점이 루트 도메인을 의미).  
- **역할**: DNS 쿼리 시 **루트 네임 서버**를 가리키는 시작점입니다.  

#### **2. 탑 레벨 도메인 (Top-Level Domain, TLD)**  
- **정의**: 루트 도메인 바로 아래 계층입니다.  
- **종류**:  
  - **gTLD(일반 TLD)**: `.com`, `.net`, `.org` 등.  
  - **ccTLD(국가 코드 TLD)**: `.kr`(한국), `.jp`(일본) 등.  
  - **새로운 gTLD**: `.app`, `.blog`, `.ai` 등.  
- **예시**: `example.com`에서 `.com`이 TLD입니다.  

#### **3. 세컨드 레벨 도메인 (Second-Level Domain, SLD)**  
- **정의**: TLD 아래에 위치하며, 사용자가 직접 등록하는 고유한 이름입니다.  
- **예시**: `example.com`에서 `example`이 SLD입니다.  

#### **4. 서브 도메인 (Subdomain)**  
- **정의**: SLD의 하위 분할로, 추가적인 계층을 생성합니다.  
- **역할**: 특정 서비스(예: 블로그, API)를 분리해 관리할 수 있습니다.  
- **예시**: `blog.example.com`에서 `blog`가 서브 도메인입니다.  

---

### **DNS 서버 종류**  
DNS 해석 과정은 **계층적 질의**를 통해 이루어지며, 각 단계별 서버가 역할을 분담합니다.  

---

#### **1. 루트 네임 서버 (Root Name Server)**  
- **역할**: DNS 쿼리의 시작점으로, **TLD 네임 서버의 주소**를 제공합니다.  
- **특징**: 전 세계에 13개 그룹의 루트 서버가 분산되어 있습니다.  
- **예시**: `a.root-servers.net`, `b.root-servers.net`.  

#### **2. TLD 네임 서버 (Top-Level Domain Name Server)**  
- **역할**: 특정 TLD(예: `.com`)를 관리하며, **SLD의 권한 있는 네임 서버 주소**를 반환합니다.  
- **예시**: `.com` TLD 서버는 `example.com`의 네임 서버 주소를 알려줍니다.  

#### **3. SLD 네임 서버 (Second-Level Domain Name Server)**  
- **정의**: **권한 있는 네임 서버(Authoritative Name Server)**로, 특정 도메인의 DNS 레코드(A, CNAME 등)를 직접 관리합니다.  
- **역할**: 최종 IP 주소 또는 추가 레코드를 반환합니다.  
- **예시**: `example.com`의 SLD 서버는 `www.example.com`의 IP 주소를 제공합니다.  

#### **4. DNS 해석기 (DNS Resolver)**  
- **정의**: 사용자 기기(PC, 스마트폰)의 DNS 쿼리를 대신 처리하는 서버입니다.  
- **역할**:  
  1. 로컬 캐시에서 결과를 먼저 확인합니다.  
  2. 캐시에 없으면 루트 → TLD → SLD 서버로 순차적 질의를 수행합니다.  
- **예시**: 통신사(ISP)의 DNS 서버 (예: SKT의 `168.126.63.1`).  

---

### **DNS 해석 과정 예시**  
사용자가 `www.example.com`을 입력하면:  
1. **DNS 해석기**가 루트 서버에 `.com` TLD 서버 주소를 요청.  
2. **TLD 서버**에서 `example.com`의 SLD 서버 주소 획득.  
3. **SLD 서버**에서 `www.example.com`의 IP 주소 획득.  
4. 사용자 기기에 IP 주소 전달 → 웹 사이트 접속.  

---

### **요약**  
| **구분**             | **도메인 구조**      | **DNS 서버**              |
| -------------------- | -------------------- | ------------------------- |
| **최상위**           | 루트 도메인 (`.`)    | 루트 네임 서버            |
| **상위 계층**        | TLD (`.com`, `.kr`)  | TLD 네임 서버             |
| **사용자 정의 계층** | SLD (`example`)      | SLD 네임 서버 (권한 서버) |
| **하위 분할**        | 서브 도메인 (`blog`) | -                         |
| **클라이언트 측**    | -                    | DNS 해석기                |

------

## DNS 통신 흐름

<img src="../../../assets/cisco_post_img/2025-04-15-AWS DNS/IMG_0680.jpeg" alt="IMG_0680" style="zoom:33%;" />

**1.사용자 PC에서 blog,cloudnets.net이라는 도메인 주소의 1P 주소를 알기 위해 DNS 서비에 질의합니다. 여기에서 DNS 서버는 DNS 해석기를 이용하여 다양한 네임 서버와 동신하는 중계자 역할을 수행합니다.**

**2.기본적으로 DNS 해석기는 전 세계에 있는 루트 네임 서버의 주소를 알고 있습니다. 해당 후 트 네임 서버에 blog.doudneta_net 도메인 주소의 IP 주소를 물어봅니다. 여기에서 부트 네 임 서버는 blog. cloudneta.ner이라는 도메인 주소를 알지 못하지만 .ner의 TLD 네임 서버 는 알고 있기 때문에 해당 정보를 DNS 해석기에 전달합니다.**

**3.그러면 DNs 해석기는 .ner에 해당하는 TLD 네임 서버에 blog.cloudneta.net 도메인 주소 의 IP 주소를 물어봅니다. 여기에서 TLD 네임 서버는 blog.cloudneta.net이라는 도메인 주소를 알지 못하지만 dloudneta.ner의 SLD 네임 서버는 알고 있어 해당 정보를 DNS 해석기에 전달합니다.**

**4.다시 DNS 해석기는 dloudneca.ner에 해당하는 SLD 네임 서버에 blog,.cloudneta.net 도메 인 주소의 IP 주소를 물어봅니다. 이 SLD 네임 서버는 도메인 주소의 최종 정보가 있는 권한 이 있는 네임 서버로, blog.doudneta.net에 대한 IP 주소를 DNS 해석기에 전달합니다.**

**5.DNS 해석기는 bl0g.coudneta.ner에 대해 최종적으로 해석한 IP 주소를 사용자 PC에 전달 합니다. 이것으로 사용자 PC는 blog. doudneta.net 도메인 주소의 IP 주소를 알게 되어 해 당 IP 주소로 통신합니다.**

------

------

## **DNS 레코드 유형 정리**  
DNS 레코드는 도메인 이름을 특정 리소스(IP 주소, 서버 등)에 연결하는 규칙입니다.  
주요 레코드 유형의 **역할**, **사용 사례**, **예시**를 중심으로 설명합니다.

---

#### **1. A 레코드 (IPv4 주소 레코드)**  
- **역할**: 도메인 이름을 **IPv4 주소**로 매핑합니다.  
- **사용 사례**: 웹 서버, 메일 서버 등 IPv4 기반 서비스 연결.  
- **예시**:  
  ```plaintext
  example.com.   A   192.0.2.1
  ```
- **주의사항**:  
  - IPv4 주소만 지원하며, 서브넷 마스크 설정과 무관합니다.  

---

#### **2. AAAA 레코드 (IPv6 주소 레코드)**  
- **역할**: 도메인 이름을 **IPv6 주소**로 매핑합니다.  
- **사용 사례**: IPv6 환경에서 호스팅되는 리소스 연결.  
- **예시**:  
  ```plaintext
  example.com.   AAAA   2001:0db8:85a3::8a2e:0370:7334
  ```
- **주의사항**:  
  - IPv6 주소 형식(`:`로 구분된 16진수)을 정확히 입력해야 합니다.  

---

#### **3. NS 레코드 (네임 서버 레코드)**  
- **역할**: 도메인 이름의 네임 서버 주소로 매핑하는 DNS 레코드 유형입니다.
- **사용 사례**: 도메인의 DNS 질의를 처리할 서버 정의.  
- **예시**:  
  ```plaintext
  net NS a.gtld-servers.net.
  example.com.   NS    ns1.example.com.
  example.com.   NS    ns2.example.com.
  ```
- **주의사항**:  
  - 도메인 등록 시 Registrar(예: GoDaddy)에서 NS 레코드를 반드시 설정해야 합니다.  

---

#### **4. CNAME 레코드 (별칭 레코드)**  
- **역할**: 도메인 이름의 **별칭(Alias)**을 생성합니다.  
- **사용 사례**:  
  - `www.example.com` → `example.com`으로 리다이렉트.  
  - 여러 서비스(CDN, 로드 밸런서)에 유연하게 연결.  
- **예시**:  
  ```plaintext
  www.cloudneta.net   CNAME   cloudneta.net
  ```
- **주의사항**:  
  - **루트 도메인(`example.com`)**에는 CNAME 사용 불가 → ALIAS 또는 A 레코드 사용.  
  - CNAME은 다른 CNAME을 가리킬 수 없습니다.  

---

### **레코드 유형 비교**  
| **레코드** | **목적**                 | **대상**         | **예시**                        |
| ---------- | ------------------------ | ---------------- | ------------------------------- |
| **A**      | IPv4 주소 연결           | IPv4 주소        | `example.com → 192.0.2.1`       |
| **AAAA**   | IPv6 주소 연결           | IPv6 주소        | `example.com → 2001:db8::1`     |
| **NS**     | 권한 있는 네임 서버 지정 | 네임 서버 도메인 | `example.com → ns1.cloud.com`   |
| **CNAME**  | 도메인 별칭 생성         | 다른 도메인 이름 | `www.example.com → example.com` |

---

### **DNS 쿼리 과정에서의 활용**  
1. 사용자가 `www.example.com` 입력 → **DNS 해석기**가 질의 시작.  
2. **루트/TLD 서버**를 거쳐 `example.com`의 **NS 레코드** 확인.  
3. NS 레코드가 가리키는 **권한 서버**에서 `www.example.com`의 **CNAME** 또는 **A 레코드** 조회.  
4. 최종 IP 주소 획득 후 사용자에게 전달.  

---

### **실무 팁**  
- **CNAME vs ALIAS**:  
  - ALIAS(AWS Route 53)는 루트 도메인에서도 사용 가능하며, **A 레코드처럼 동작**합니다.  
- **TTL(Time-to-Live)**:  
  - 레코드 변경 시 TTL을 짧게 설정해 캐시 갱신 시간을 줄입니다.  
- **DNSSEC**:  
  - 레코드 변조 방지를 위해 DNSSEC를 활성화합니다.