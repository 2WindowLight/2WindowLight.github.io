---
title: <h0>AWS ENI 개념</h0>
author: cotes 
categories: [cisco virtual cloud,2025-04-10-cisco]
tags: [Network,AWS]





---

## **로드 밸런서의 ENI(Elastic Network Interface) 역할 심층 분석**

---

#### **1. ENI의 기본 개념**
**ENI(Elastic Network Interface)**는 AWS VPC 내에서 **가상 네트워크 카드** 역할을 하는 논리적 컴포넌트입니다.  
- **물리적 서버의 NIC(Network Interface Card)**와 유사하지만, **소프트웨어 정의 네트워크(SDN)**로 구현됩니다.
- **주요 속성**:
  - 프라이빗 IP 주소 (필수)
  - 퍼블릭 IP 주소 (선택적)
  - 보안 그룹 (1개 이상 연결)
  - MAC 주소

---

#### **2. 로드 밸런서에서 ENI의 역할**
로드 밸런서는 내부적으로 **ENI를 통해 네트워크 트래픽을 수신/전달**합니다.  
이 과정에서 ENI는 다음과 같은 **3가지 핵심 기능**을 수행합니다:

##### **(1) 트래픽 수신 및 분산 게이트웨이**
- **동작 원리**:
  1. 클라이언트 요청이 로드 밸런서의 DNS 이름(`my-lb-1234567890.elb.amazonaws.com`)으로 전송됩니다.
  2. DNS는 로드 밸런서에 연결된 **ENI의 IP 주소**로 변환됩니다.
  3. ENI는 수신한 트래픽을 로드 밸런서의 코어 처리 엔진으로 전달합니다.
- **특징**:
  - ALB/NLB는 **Multi-AZ 구성 시 각 AZ에 별도 ENI 생성** (고가용성 보장).
  - NLB의 경우 **고정 IP 주소**를 ENI에 할당해 클라이언트 세션 유지.

##### **(2) 보안 및 네트워크 격리**
- **보안 그룹 적용**:
  - ENI에 연결된 보안 그룹이 **인바운드/아웃바운드 트래픽을 필터링**합니다.
  - *예: ALB의 ENI는 보안 그룹에서 HTTP 80/443 포트만 허용하도록 구성*.
- **네트워크 경계**:
  - ENI는 로드 밸런서를 특정 **서브넷**에 연결하는 논리적 앵커 역할을 합니다.
  - *예: 퍼블릭 서브넷의 ENI는 인터넷 게이트웨이와 통신*.

##### **(3) 성능 최적화**
- **NLB의 경우**:
  - ENI가 **초고속 패킷 처리**를 담당해 초당 수백만 요청 처리 가능.
  - **Preserve Source IP** 기능으로 클라이언트 IP 유지 (ENI가 직접 트래픽 전달).
- **ALB의 경우**:
  - ENI는 **L7 프로토콜 분석**을 위해 프록시 모드로 동작.

---

#### **3. ENI의 라이프사이클**
| **로드 밸런서 유형** | **ENI 생성 시기**                   | **ENI 제거 시기**                |
| -------------------- | ----------------------------------- | -------------------------------- |
| **ALB**              | 로드 밸런서 생성 시 자동 생성       | 로드 밸런서 삭제 시 자동 제거    |
| **NLB**              | 로드 밸런서 생성 시 또는 AZ 추가 시 | 로드 밸런서 삭제 또는 AZ 제거 시 |
| **GLB**              | 대상 그룹에 첫 번째 대상 등록 시    | 마지막 대상 제거 시              |

- **주의 사항**:
  - NLB의 ENI는 **수동으로 삭제 불가능** (로드 밸런서 관리 시스템이 전권 제어).
  - ENI 할당 실패 시 로드 밸런서 생성이 실패할 수 있음 (서브넷의 사용 가능 IP 부족).

---

#### **4. ENI의 고급 구성 사례**
##### **(1) 내부 로드 밸런서의 ENI**
- **프라이빗 서브넷**에 위치한 ENI는 **NAT 없이도 VPC 내부 통신**을 처리합니다.
- *예: 마이크로서비스 간 통신에서 내부 ALB의 ENI가 트래픽 중계*.

##### **(2) 크로스-존 로드 밸런싱**
- **다른 AZ의 ENI**가 장애 시에도 트래픽 처리 가능 (ENI 간 자동 장애 조치).
- *예: us-east-1a의 ENI 장애 → us-east-1b의 ENI로 트래픽 리디렉션*.

##### **(3) 보안 강화**
- **네트워크 ACL + 보안 그룹**으로 ENI에 이중 보안 계층 적용:
  ```plaintext
  [네트워크 ACL] (서브넷 레벨)
    └─ [ENI 보안 그룹] (인스턴스 레벨)
  ```

---

### **5. ENI vs 일반 인스턴스의 ENI 차이**
| **특징**        | **로드 밸런서 ENI**           | **EC2 인스턴스 ENI**                |
| --------------- | ----------------------------- | ----------------------------------- |
| **IP 주소**     | AWS 관리 (사용자 할당 불가)   | 사용자가 퍼블릭/IPv6 주소 할당 가능 |
| **보안 그룹**   | 로드 밸런서 전용 규칙 적용    | 인스턴스별 독립적 구성              |
| **가시성**      | AWS 콘솔에서만 간접 확인 가능 | EC2 대시보드에서 직접 관리          |
| **성능 최적화** | 초고속 패킷 처리 특화         | 일반 네트워크 인터페이스 수준       |

---

### **요약: ENI의 핵심 가치**
1. **트래픽 입구**: 로드 밸런서가 네트워크 트래픽을 수신하는 물리적/논리적 엔드포인트.  
2. **보안 경계**: 보안 그룹과 서브넷으로 네트워크 보안 정책 적용.  
3. **고가용성 기반**: Multi-AZ 배포 시 각 AZ의 ENI가 독립적 장애 도메인 구성.  

> ENI는 로드 밸런서의 **"숨은 핵심 부품"**으로, 사용자는 직접 관리하지 않지만 내부적으로 **트래픽 처리의 기반 인프라** 역할을 합니다.  
> *"로드 밸런서의 ENI는 공항의 활주로처럼 보이지 않지만 모든 트래픽이 반드시 거쳐가는 필수 경로입니다."*